<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title id="site-title"></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" id="site-desc" />
  <link rel="stylesheet" href="style.css" />
  <script src="data.js"></script>
</head>
<body>
  <div id="top"></div>

  <header>
    <div class="brand">
      <div>
        <strong id="name"></strong><br />
        <span id="tagline"></span>
      </div>
    </div>
    <nav>
      <a href="/#top" class="home-link">Home</a>
      <a href="portfolio.html">Portfolio</a>
      <a href="extracurriculars.html">Extracurriculars</a>
      <a href="/#contact">Contact</a>
      <button id="theme-toggle" class="icon-btn" type="button" aria-label="Toggle theme"></button>
    </nav>
  </header>

  <main>
    <section id="hero" class="hero">
      <div class="hero-aside">
        <div class="hero-image">
          <img id="hero-avatar" src="img/avatar.jpg" alt="Headshot of Kaitlin Calimbahin" />
        </div>
        <div id="hero-contacts" class="hero-contacts plain"></div>
      </div>

      <div class="hero-text">
        <span class="pill">Open to internships • Summer 2026</span>
        <h1 id="hero-title"></h1>
        <p id="about-text" class="about-in-hero"></p>
        <div class="row">
          <a class="btn" href="/resume.html" target="_blank" rel="noopener">View Resume</a>
          <a href="portfolio.html">View Projects ↗</a>
        </div>
      </div>
    </section>

    <section id="projects">
      <h2>Projects</h2>
      <div id="projects-highlights" class="preview-grid"></div>
      <p style="margin-top:10px"><a class="btn" href="portfolio.html">View all projects</a></p>
    </section>

    <section id="experience">
      <h2>Experience</h2>
      <div id="experience-highlights" class="preview-grid"></div>
      <p style="margin-top:10px"><a class="btn" href="portfolio.html#experience">View all experience</a></p>
    </section>

    <section id="extracurriculars">
      <h2>Extracurriculars</h2>
      <div id="extracurriculars-highlights" class="preview-grid"></div>
      <p style="margin-top:10px"><a class="btn" href="extracurriculars.html">View all extracurriculars</a></p>
    </section>

    <section id="contact">
      <h2>Contact</h2>
      <p id="contact-links"></p>
    </section>
  </main>

  <footer>
    © <span id="year"></span> <span id="name-footer"></span>
  </footer>

  <script>
    /* helpers */
    const setText = (id, t) => { const el = document.getElementById(id); if (el) el.textContent = t; };
    const setSrc  = (id, s) => { const el = document.getElementById(id); if (el) el.src = s; };

    /* icons for contact */
    const mailSvg = `
      <svg class="icon" viewBox="0 0 16 16" aria-hidden="true">
        <path fill="currentColor" d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v.217L8 8.5 0 4.217V4z"/>
        <path fill="currentColor" d="M0 4.697v7.104A2 2 0 0 0 2 14h12a2 2 0 0 0 2-2.199V4.697L8 9.5 0 4.697z"/>
      </svg>`;
    const liSvg = `
      <svg class="icon" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path fill="currentColor"
          d="M100.28 448H7.4V148.9h92.88V448zM53.84 106.1C24.1 106.1 0 82 0 52.3
             0 22.6 24.1-1.5 53.84-1.5S107.7 22.6 107.7 52.3c0 29.7-24.1 53.8-53.86 53.8zM447.9 448h-92.4V302.4
             c0-34.7-.7-79.3-48.3-79.3-48.3 0-55.7 37.7-55.7 76.7V448h-92.5V148.9h88.8v40.8h1.3c12.4-23.5 42.7-48.3
             87.9-48.3 94 0 111.3 61.9 111.3 142.3V448z"/>
      </svg>`;

    /* meta + header/footer text */
    document.title = siteData.title;
    const desc = document.getElementById("site-desc");
    if (desc) desc.setAttribute("content", siteData.description);
    setSrc("hero-avatar", siteData.avatar);
    setText("name", siteData.name);
    setText("tagline", siteData.tagline);
    setText("name-footer", siteData.name);
    setText("year", new Date().getFullYear());
    setText("hero-title", siteData.heroTitle);
    setText("about-text", siteData.about);

    /* contacts */
    const hc = document.getElementById("hero-contacts");
    if (hc) {
      hc.innerHTML = `
        <a class="contact-link" href="${siteData.emailHref}">${mailSvg}<span>Email</span></a>
        <a class="contact-link" href="${siteData.linkedinHref}" target="_blank" rel="noopener">${liSvg}<span>LinkedIn</span></a>`;
    }
    const cl = document.getElementById("contact-links");
    if (cl) {
      cl.innerHTML = `
        <a class="contact-link" href="${siteData.emailHref}">${mailSvg}<span>Email</span></a>
        <span class="sep-bar"> | </span>
        <a class="contact-link" href="${siteData.linkedinHref}" target="_blank" rel="noopener">${liSvg}<span>LinkedIn</span></a>`;
    }

    /* preview card builder */
    const placeholder = "img/placeholder.jpg";
    function makePreviewCard(item, descKey="desc"){
      const a = document.createElement("a");
      a.className = "preview-card";
      a.href = `portfolio.html#${item.id}`;
      const img = item.img || placeholder;
      const desc = item[descKey] || "";
      a.innerHTML = `
        <div class="thumb"><img src="${img}" alt="${item.title}"></div>
        <h3>${item.title}</h3>
        <p class="muted">${desc}</p>`;
      return a;
    }

    /* projects */
    const ph = document.getElementById("projects-highlights");
    if (ph && siteData.highlights?.projects) {
      siteData.highlights.projects.forEach(id => {
        const p = siteData.projects.find(x => x.id === id);
        if (p) ph.appendChild(makePreviewCard(p,"desc"));
      });
    }

    /* experience */
    const eh = document.getElementById("experience-highlights");
    if (eh && siteData.highlights?.experience) {
      siteData.highlights.experience.forEach(id => {
        const e = siteData.experience.find(x => x.id === id);
        if (!e) return;
        const card = makePreviewCard({ ...e, desc:e.details }, "desc");
        card.href = `portfolio.html#${e.id}`;
        eh.appendChild(card);
      });
    }

    /* extracurriculars */
    const xh = document.getElementById("extracurriculars-highlights");
    if (xh && siteData.highlights?.extracurriculars) {
      siteData.highlights.extracurriculars.forEach(id => {
        const x = siteData.extracurriculars.find(e => e.id === id);
        if (!x) return;
        const card = makePreviewCard({ ...x, desc:x.details }, "desc");
        card.href = `extracurriculars.html#${x.id}`;
        xh.appendChild(card);
      });
    }

    /* Sun/Moon theme toggle (shared) */
    const ICON_SUN = `
      <svg viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/>
      </svg>`;
    const ICON_MOON = `
      <svg viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
      </svg>`;

    (function initTheme(){
      const root = document.documentElement;
      const btn = document.getElementById('theme-toggle');
      if (!btn) return;

      const prefersDark = () => window.matchMedia('(prefers-color-scheme: dark)').matches;
      const getTheme = () => localStorage.getItem('theme') || (prefersDark() ? 'dark' : 'light');
      const apply = (t) => {
        root.setAttribute('data-theme', t);
        localStorage.setItem('theme', t);
        btn.innerHTML = t === 'dark' ? ICON_MOON : ICON_SUN;
        btn.title = t === 'dark' ? 'Switch to light mode' : 'Switch to dark mode';
      };

      apply(getTheme());
      btn.addEventListener('click', () => apply(getTheme() === 'dark' ? 'light' : 'dark'));
    })();

    /* Smooth-scroll to top if already on homepage */
    document.querySelectorAll('a.home-link').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const onHome = location.pathname === '/' || location.pathname.endsWith('/index.html') || location.pathname.endsWith('index.html');
        if (onHome){ e.preventDefault(); window.scrollTo({top:0, behavior:'smooth'}); }
      });
    });
  </script>
</body>
</html>
